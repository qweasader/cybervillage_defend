<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∫–ª–∞–¥ –î–∞–Ω–Ω—ã—Ö - –ö–∏–±–µ—Ä–¥–µ—Ä–µ–≤–Ω—è</title>
    <link rel="stylesheet" href="style.css">
    <script src="telegram.js" defer></script>
</head>
<body>
    <div class="container">
        <header>
            <button class="back-button" onclick="tgApp.closeApp()">‚Üê</button>
            <div class="logo">üì¶ –°–∫–ª–∞–¥ –î–∞–Ω–Ω—ã—Ö</div>
            <div class="user-info" id="userInfo"></div>
        </header>

        <main>
            <div class="location-content">
                <h1>–°–∫–ª–∞–¥ –î–∞–Ω–Ω—ã—Ö</h1>
                <p>–í–∏—Ä—É—Å –ø–µ—Ä–µ–º–µ—à–∞–ª —Ü–≤–µ—Ç–æ–≤—ã–µ –∫–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!</p>
                
                <div class="task-description">
                    <p><strong>–¶–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞:</strong></p>
                    <ul>
                        <li>–¶–≤–µ—Ç –Ω–µ–±–∞ = #3357FF</li>
                        <li>–¶–≤–µ—Ç –∑–µ–º–ª–∏ = #8B4513</li>
                        <li>–¶–≤–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ = #FF0000</li>
                    </ul>
                    <p><strong>–ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –ü–æ—Ä—è–¥–æ–∫: –Ω–µ–±–æ ‚Üí –∑–µ–º–ª—è ‚Üí –æ–ø–∞—Å–Ω–æ—Å—Ç—å</p>
                </div>
                
                <div class="answer-section">
                    <p><strong>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π HEX-–∫–æ–¥:</strong></p>
                    <div class="color-options">
                        <div class="color-option" data-hex="#3357FF">
                            <div class="color-preview" style="background: #3357FF;"></div>
                            <span>#3357FF</span>
                        </div>
                        <div class="color-option" data-hex="#8B4513">
                            <div class="color-preview" style="background: #8B4513;"></div>
                            <span>#8B4513</span>
                        </div>
                        <div class="color-option" data-hex="#FF0000">
                            <div class="color-preview" style="background: #FF0000;"></div>
                            <span>#FF0000</span>
                        </div>
                        <div class="color-option" data-hex="#2196F3">
                            <div class="color-preview" style="background: #2196F3;"></div>
                            <span>#2196F3</span>
                        </div>
                    </div>
                    <button onclick="checkAnswer()">–ü–†–û–í–ï–†–ò–¢–¨</button>
                </div>
                
                <div class="hint-section">
                    <p>üí° –ù—É–∂–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞? –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É <code>/hint</code> –≤ Telegram</p>
                    <button class="hint-button" onclick="requestHint()">
                        –ü–û–õ–£–ß–ò–¢–¨ –ü–û–î–°–ö–ê–ó–ö–£
                    </button>
                </div>
            </div>
        </main>
    </div>

    <style>
        .color-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .color-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .color-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .color-option.selected {
            border-color: #2575fc;
            box-shadow: 0 0 0 3px rgba(37, 117, 252, 0.3);
        }
        .color-preview {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 8px;
        }
    </style>

    <script>
        document.addEventListener('telegramReady', () => {
            tgApp.sendLocationChanged('storage');
        });

        let selectedColor = null;

        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.color-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                selectedColor = option.getAttribute('data-hex');
            });
        });

        function checkAnswer() {
            if (!selectedColor) {
                tgApp.showAlert('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥!');
                return;
            }
            
            const correctAnswer = '#3357FF';
            
            if (selectedColor === correctAnswer) {
                tgApp.showAlert('‚úÖ –í–µ—Ä–Ω–æ! –≠—Ç–æ –∫–æ–¥ —Ü–≤–µ—Ç–∞ –Ω–µ–±–∞. –í—ã –ø–æ–ª—É—á–∏–ª–∏ –∞–º—É–ª–µ—Ç!', () => {
                    tgApp.sendAmuletCollected(5, 'storage');
                    setTimeout(() => {
                        window.location.href = 'firewall.html';
                    }, 1500);
                });
            } else {
                tgApp.showAlert('‚ùå –ù–µ–≤–µ—Ä–Ω–æ! –≠—Ç–æ –Ω–µ –∫–æ–¥ —Ü–≤–µ—Ç–∞ –Ω–µ–±–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
        }

        function requestHint() {
            tgApp.requestHint('storage').then(hint => {
                if (hint) {
                    tgApp.showAlert(`üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:\n${hint}`);
                }
            });
        }
    </script>
</body>
</html>